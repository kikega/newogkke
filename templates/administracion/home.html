{% extends "base.html" %}
{% load static %}

{% block container %}
    
    {% include "administracion/header.html" %}

    <main class="mb-5 mt-5">
        <div class="mb-5 color-texto">
            <div class="text-center">
                <img class="my-4 img-fluid" src={% static "img/logo.png" %} alt="Logo OGKKE">
            </div>
            <div class="text-center">
                <div class="container py-3">
                    <h1>Okinawa Goju-Ryu Karate-Do Kyokai España<h1>
                    <h2 class="col-lg-8 mx-auto lead">
                        Sensei Ryoichi Onaga, Hansi 10º Dan. Director Técnico OGKKE
                    </h2>
                </div>
            </div>
        </div>

        <section class="album py-5">
            <div class="container">
                
                <div class="row row-cols-1 row-cols-md-1 row-cols-lg-2 row-cols-xl-3 g-3">
                    <article class="col">
                        <div class="card shadow-sm">
                            <img src="{% static "img/dojos.jpg" %}" class="card-img-top img-fluid" alt="Dojos">
                            <div class="m-3">
                                <h3 class="card-title">Dojos <span class="badge text-bg-dark fs-3">{{ dojos }}</span></h3>
                            </div>
    
                            <div class="card-body">
                                <div class="d-flex justify-content-end align-items-center">
                                    <div class="btn-group">
                                        <button type="button" class="btn btn-primary">Acceder</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </article>

                    <article class="col">
                        <div class="card shadow-sm">
                            <img src="{% static "img/cn.jpg" %}" class="card-img-top img-fluid" alt="DojosCintos negros">
                            <div class="m-3">
                                <h3 class="card-title">Cintos Negros <span class="badge text-bg-dark fs-3">{{ cn }}</span></h3>
                            </div>
    
                            <div class="card-body">
                                <div class="d-flex justify-content-end align-items-center">
                                    <div class="btn-group">
                                        <button type="button" class="btn btn-primary">Acceder</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </article>

                    <article class="col">
                        <div class="card shadow-sm">
                            <img src="{% static "img/gassukus.jpg" %}" class="card-img-top img-fluid" alt="Gasshukus">
                            <div class="m-3">
                                <h3 class="card-title">Gasshukus <span class="badge text-bg-dark fs-3">{{ cursos }}</span></h3>
                            </div>
    
                            <div class="card-body">
                                <div class="d-flex justify-content-end align-items-center">
                                    <div class="btn-group">
                                        <button type="button" class="btn btn-primary">Acceder</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </article>

                    {% comment %} <article class="col">
                        <div class="card shadow-sm">
                            <img src="{% static "img/peticiones.jpg" %}" class="card-img-top img-fluid" alt="Peticiones">
                            <div class="m-3">
                                <h3 class="card-title">Peticiones <span class="badge text-bg-dark fs-3">{{ peticiones }}</span></h3>
                            </div>
    
                            <div class="card-body">
                                <div class="d-flex justify-content-end align-items-center">
                                    <div class="btn-group">
                                        <button type="button" class="btn btn-primary">Acceder</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </article> {% endcomment %}

                </div>
            </div>
        </section>

        <div class="container">
            <div>
                <canvas id="graficoDanes" width="400" height="200"></canvas>
            </div>
        </div>

        <script>
            const data = JSON.parse('{{ data_json|safe }}'); // Obtener los datos como objeto JavaScript

            const ctx = document.getElementById('graficoDanes').getContext('2d');
            const config = {
                type: 'bar',
                data: {
                    datasets: [{
                        label: 'DAN',
                        data: data.values,      
                        borderWidth: 2,
                        borderRadius: 10,
                        backgroundColor: [
                            'rgba(255, 255, 255, 0.6)',
                            'rgba(255, 255, 0, 0.6)',
                            'rgba(255, 165, 0, 0.6)',
                            'rgba(0, 128, 0, 0.6)',
                            'rgba(0, 0, 255, 0.6)',
                            'rgba(165, 42, 42, 0.6)',
                            'rgba(128, 0, 128, 0.6)',
                            'rgba(255, 0, 0, 0.6)',
                            'rgba(128, 128, 128, 0.6)',
                        ],
                        borderColor: [
                            'rgba(255, 255, 255)',
                            'rgba(255, 255, 0)',
                            'rgba(255, 165, 0)',
                            'rgba(0, 128, 0)',
                            'rgba(0, 0, 255)',
                            'rgba(165, 42, 42)',
                            'rgba(128, 0, 128)',
                            'rgba(255, 0, 0)',
                            'rgba(128, 128, 128)',
                        ],
                    }],
                    labels: ['1º DAN', '2º DAN', '3º DAN', '4º DAN','5º DAN','6º DAN','7º DAN','8º DAN','10º DAN'],
                },
                options: {
                    responsive: true,
                    indexAxis: 'y',
                    plugins: {
                        title: {
                            display: true,
                            font: {
                                size: 26,
                            },
                            text: data.titulo,
                        }
                    },
                },
            };

            const myChart = new Chart(ctx, config);
        </script>

    </main>

    {% endblock container %}
